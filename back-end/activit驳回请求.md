## 关于activit驳回请求

目前我在流程图中实现了关于请求审批被驳回的逻辑，但是我认为目前还是有问题的，现在现总结一下大致的实现：

目前我假设的场景是专家审批的时候给教师的课题申请打分，打完分后把分数作为一个variable，然后下一步就一个script task，这个节点有一段groovy脚本，
```
def result = execution.getVariable("score")
if(result>60){
      execution.setVariable("verifyResult",true)
}else{
     execution.setVariable("verifyResult",false)
}
```
这段脚本就是对分数进行判断，当大于60分的时候，设置一个校验通过的变量，然后赋值为true，反之为false，然后做分支条件判断，这里使用的是单一网关，比如${verifyResult == true} 这种情况下，业务流程直接流向下一个节点，否则退回到发起人节点。
接下来还有许多问题，在这里其实我觉得算不上严格意义的驳回，因为回到发起人节点之后这个状态的判定还是不明确，这个时候还需要依赖流程变量去显示是驳回状态，这个过程的记录需要思考一下怎么才能做到优雅。

## 关于bussnessKey
之所以使用工作流，也是因为业务的流程控制我们交给activiti引擎，流程的每一个节点其实就是我们的业务逻辑的实现嘛，比如课题申请这个节点的业务逻辑相关的数据，如申请人信息，课题信息等等，目前我还没有单独建立一个流程节点的业务表，然后通过业务主键去关联，这是需要下一步要去做的。

## 关于权限认证相关
目前实现的这个demo可能会存在越权的问题，我想出了两个方式应对，一个是把rest-api的代码拷贝出来，自己写代码验证，这种会加大工作量嘛，第二种，我觉得activiti一定预留出接口，比如userEntity之类的，我们实现权限这部分的逻辑就可以了，拒绝横向越权和纵向越权的相关问题


## 工作过程中遇到的小困惑
其实看起来，在我们新建一个新实例的时候，startByUser都是自己实现的，所以依靠API去做这件事情就是不现实的，这也是为什么我先前在自己实现的时候一直获得不到这个值，因为当时就没有set。同理，我觉得initiotor初始人也是需要自己设置的，包括assignee等


Can't find scripting engine for 'groovy'


